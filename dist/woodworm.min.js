/*
 *  Woodworm.js - v0.1.1
 *  A handy-dandy javascript library to parse, display, and manage bible passages from Labs.Bible.org
 *  http://donald-john.github.io/woodworm/
 *
 *  Made by Don Adams
 *  Under MIT License
 */
!function(a,b){"use strict";function c(b,c){this.settings={book:"Genesis",chapter:1,verse:1,selectedVerses:[]},this.element=b,this.settings=a.extend({},this.settings,c),this.init()}a&&b.jQuery||console.error("Woodworm: jQuery not included. Woodworm needs jQuery to do it's thang."),a.extend(c.prototype,{init:function(){this.getChapter()},getChapter:function(a,b){this.settings.chapter=b?parseInt(b):this.settings.chapter,this.settings.book=a?a:this.settings.book,this.getData().done(function(a){this.render(a)})},render:function(b){a(this.element).empty();for(var c=0;c<b.length;c++){var d=b[c].bookname,e=b[c].chapter,f=b[c].verse;b[c].title?(a(this.element).append("<h4>"+b[c].title+"</h4>"),a(this.element).append("<div class='p' id="+d+e+"-"+f+" onclick=\"catchClick('"+d+"',"+e+","+f+")\"><span class='content'></span><span class='verse v1' data-usfm='JHN.1.1'><span class='label'>"+b[c].verse+"</span><span class='content'>"+b[c].text+"</span></span></div>")):a(this.element).append("<div class='p' id="+d+e+"-"+f+" onclick=\"catchClick('"+d+"',"+e+","+f+")\"><span class='content'></span><span class='verse v1' data-usfm='JHN.1.1'><span class='label'>"+b[c].verse+"</span><span class='content'>"+b[c].text+"</span></span></div>")}},getData:function(){var b=a.ajax({url:"http://labs.bible.org/api/?passage="+this.settings.book+"%20"+this.settings.chapter+"&type=json&callback=?",dataType:"json",context:this});return b},status:function(){return this.settings},verseClick:function(b,c,d){function e(b,c){var d;a.grep(c,function(a,e){b.verse===a.verse&&b.book===a.book&&b.chapter===a.chapter&&(c=c.splice(e,1),d=!0)}),d||c.push(b),console.log(c)}"rgb(255, 255, 0)"!==a("#"+b+c+"-"+d).css("background-color")?a("#"+b+c+"-"+d).css("background-color","yellow"):a("#"+b+c+"-"+d).css("background-color","white"),e({book:b,chapter:c,verse:d},this.settings.selected_verses)},err:function(a){console.error(a)}}),a.fn.Woodworm=function(b){return this.each(function(){a.data(this,"plugin_Woodworm")||a.data(this,"plugin_Woodworm",new c(this,b))})}}(jQuery,window,document);