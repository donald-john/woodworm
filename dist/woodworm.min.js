/*
 *  Woodworm.js - v0.1.1
 *  A handy-dandy javascript library to parse, display, and manage bible passages from Labs.Bible.org
 *  http://donald-john.github.io/woodworm/
 *
 *  Made by Don Adams
 *  Under MIT License
 */
window._=window._||{};var has=function(a,b){return null!=a&&hasOwnProperty.call(a,b)},isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},keys=function(a){if(!isObject(a))return[];if(Object.keys)return Object.keys(a);var b=[];for(var c in a)has(a,c)&&b.push(c);return b},escapeMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},createEscaper=function(a){var b=function(b){return a[b]},c="(?:"+keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}};window._.escape=createEscaper(escapeMap),function(a,b){"function"==typeof define&&define.amd?define(["jquery"],b):a.Verse=b(a.$||a.jQuery,window,document,void 0)}(this,function(a){"use strict";function b(b){this.defaults={selected:!1,book:"",chapter:0,verse:0,text:""},this.element={},this.settings=a.extend({},this.defaults,b)}return b.status=function(){},a.extend(b.prototype,{init:function(){},getData:function(){return{settings:this.settings,element:this.element}},render:function(){var a=Woodworm.Templates.verse;return this.element=a({verse:this.settings}),this},click:function(){console.log("clicked!")},err:function(){}}),b}),function(a,b){"function"==typeof define&&define.amd?define(["jquery","Verse"],b):a.Woodworm=b(a.$||a.jQuery,Verse,window,document,void 0)}(this,function(a,b,c){"use strict";function d(b,c){this.defaults={version:"NET",maxWait:1e4,infiniteScroll:!1},this.element=b,this.verses=[],this.selectedVerses=[],this.book=c&&c.book?c.book:"Genesis",this.chapter=c&&c.chapter?c.chapter:1,this.settings=a.extend({},this.defaults,c),this.init()}if(!a||!c.jQuery)throw"Woodworm: jQuery not included. Woodworm needs jQuery to do it's thang.";return d.status=function(){},a.extend(d.prototype,{init:function(){this.getChapter()},getChapter:function(a,b){this.chapter=b?parseInt(b):this.chapter,this.book=a?a:this.book,this.getData().success(function(a){this.render(a)}).error(function(a){throw a})},render:function(c){a(this.element).empty();for(var d=0;d<c.length;d++){var e=new b(c[d]);this.verses.push(e.render()),a(this.element).append(e.getData().element)}},getData:function(){var b=a.ajax({url:"http://labs.bible.org/api/?passage="+this.book+"%20"+this.chapter+"&type=json&callback=?",dataType:"json",context:this});return b},status:function(){return this.settings},verseClick:function(b,c,d){function e(b,c){var d;a.grep(c,function(a,e){b.verse===a.verse&&b.book===a.book&&b.chapter===a.chapter&&(c=c.splice(e,1),d=!0)}),d||c.push(b),console.log(c)}"rgb(255, 255, 0)"!==a("#"+b+c+"-"+d).css("background-color")?a("#"+b+c+"-"+d).css("background-color","yellow"):a("#"+b+c+"-"+d).css("background-color","white"),e({book:b,chapter:c,verse:d},this.settings.selected_verses)},err:function(a){console.error(a)}}),a.fn.Woodworm=function(b){return this.each(function(){a.data(this,"woodworm")||a.data(this,"woodworm",new d(this,b))})},d}),this.Woodworm=this.Woodworm||{},this.Woodworm.Templates=this.Woodworm.Templates||{},this.Woodworm.Templates.verse=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)verse.title&&(__p+="\n	<h4>"+(null==(__t=verse.title)?"":__t)+"</h4>\n"),__p+='\n<div class="p" id="'+(null==(__t=verse.bookname)?"":__t)+(null==(__t=verse.chapter)?"":__t)+"-"+(null==(__t=verse.verse)?"":__t)+'" onclick="'+(null==(__t=verse.click)?"":__t)+'">\n	',__p+=verse.title?"\n	<span class=\"verse v1\" data-usfm='JHN.1.1'>\n	":"\n	<span class=\"verse\" data-usfm='JHN.1.1'>\n	",__p+="\n		<span class='label'>"+(null==(__t=verse.verse)?"":__t)+"</span>\n		<span class='content'>"+(null==(__t=verse.text)?"":__t)+"</span>\n	</span>\n</div>";return __p};