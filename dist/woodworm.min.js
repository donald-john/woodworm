/*
 *  Woodworm.js - v0.1.1
 *  A handy-dandy javascript library to parse, display, and manage bible passages from Labs.Bible.org
 *  http://donald-john.github.io/woodworm/
 *
 *  Made by Don Adams
 *  Under MIT License
 */
!function(a,b){"use strict";function c(b,c){"string"==typeof b&&a("#"+b).length>0?(this.element=b,this.settings=a.extend({},e,c),this._defaults=e,this._name=d,this.init()):this.err("Something's not right with the element you provided: ",b)}a&&b.jQuery||console.error("Woodworm: jQuery not included. Woodworm needs jQuery to do it's thang.");var d="Woodworm",e={book:"Genesis",chapter:1,verse:1,selected_verses:[]};a.extend(c.prototype,{init:function(){this.getChapter(),console.log("xD")},getChapter:function(a,b,c){"function"!=typeof a?(this.options.chapter=b?parseInt(b):this.options.chapter,this.options.book=a?a:this.options.book):c=a,this.getData(this.render,c,this)},render:function(a,b){b.element.empty();for(var c=0;c<a.length;c++){var d=a[c].bookname,e=a[c].chapter,f=a[c].verse;a[c].title?(b.element.append("<h4>"+a[c].title+"</h4>"),b.element.append("<div class='p' id="+d+e+"-"+f+" onclick=\"catchClick('"+d+"',"+e+","+f+")\"><span class='content'></span><span class='verse v1' data-usfm='JHN.1.1'><span class='label'>"+a[c].verse+"</span><span class='content'>"+a[c].text+"</span></span></div>")):b.element.append("<div class='p' id="+d+e+"-"+f+" onclick=\"catchClick('"+d+"',"+e+","+f+")\"><span class='content'></span><span class='verse v1' data-usfm='JHN.1.1'><span class='label'>"+a[c].verse+"</span><span class='content'>"+a[c].text+"</span></span></div>")}},getData:function(b,c,d){a.getJSON("http://labs.bible.org/api/?passage="+d.options.book+"%20"+d.options.chapter+"&type=json&callback=?").done(function(a){b(a,d),c&&c(a,d)})},status:function(){return this.defaults},verseClick:function(b,c,d){function e(b,c){var d;a.grep(c,function(a,e){b.verse===a.verse&&b.book===a.book&&b.chapter===a.chapter&&(c=c.splice(e,1),d=!0)}),d||c.push(b),console.log(c)}"rgb(255, 255, 0)"!==a("#"+b+c+"-"+d).css("background-color")?a("#"+b+c+"-"+d).css("background-color","yellow"):a("#"+b+c+"-"+d).css("background-color","white"),e({book:b,chapter:c,verse:d},this.defaults.selected_verses)},err:function(a){console.error(a)}}),a.fn[d]=function(b){return this.each(function(){a.data(this,"plugin_"+d)||a.data(this,"plugin_"+d,new c(this,b))})}}(jQuery,window,document);