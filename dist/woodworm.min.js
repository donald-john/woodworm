/*
 *  Woodworm.js - v0.1.1
 *  A handy-dandy javascript library to parse, display, and manage bible passages from Labs.Bible.org
 *  http://donald-john.github.io/woodworm/
 *
 *  Made by Don Adams
 *  Under MIT License
 */
!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],b):a.Woodworm=b(a.$||a.jQuery,window,document,void 0)}(this,function(a,b){"use strict";function c(b,c){this.settings={version:"NET",maxWait:1e4,infiniteScroll:!1},this.element=b,this.selectedVerses=[],this.book=c&&c.book?c.book:"Genesis",this.chapter=c&&c.chapter?c.chapter:1,this.settings=a.extend({},this.settings,c),this.init()}if(!a||!b.jQuery)throw"Woodworm: jQuery not included. Woodworm needs jQuery to do it's thang.";return c.status=function(){},a.extend(c.prototype,{init:function(){this.getChapter()},getChapter:function(a,b){this.chapter=b?parseInt(b):this.chapter,this.book=a?a:this.book,this.getData().done(function(a){this.render(a)})},render:function(b){a(this.element).empty();for(var c=0;c<b.length;c++){var d=b[c].bookname,e=b[c].chapter,f=b[c].verse;b[c].title?(a(this.element).append("<h4>"+b[c].title+"</h4>"),a(this.element).append("<div class='p' id="+d+e+"-"+f+" onclick=\"catchClick('"+d+"',"+e+","+f+")\"><span class='verse v1' data-usfm='JHN.1.1'><span class='label'>"+b[c].verse+"</span><span class='content'>"+b[c].text+"</span></span></div>")):a(this.element).append("<div class='p' id="+d+e+"-"+f+" onclick=\"catchClick('"+d+"',"+e+","+f+")\"><span class='verse' data-usfm='JHN.1.1'><span class='label'>"+b[c].verse+"</span><span class='content'>"+b[c].text+"</span></span></div>")}},getData:function(){var b=a.ajax({url:"http://labs.bible.org/api/?passage="+this.book+"%20"+this.chapter+"&type=json&callback=?",dataType:"json",context:this});return b},status:function(){return this.settings},verseClick:function(b,c,d){function e(b,c){var d;a.grep(c,function(a,e){b.verse===a.verse&&b.book===a.book&&b.chapter===a.chapter&&(c=c.splice(e,1),d=!0)}),d||c.push(b),console.log(c)}"rgb(255, 255, 0)"!==a("#"+b+c+"-"+d).css("background-color")?a("#"+b+c+"-"+d).css("background-color","yellow"):a("#"+b+c+"-"+d).css("background-color","white"),e({book:b,chapter:c,verse:d},this.settings.selected_verses)},err:function(a){console.error(a)}}),a.fn.Woodworm=function(b){return this.each(function(){a.data(this,"woodworm")||a.data(this,"woodworm",new c(this,b))})},c});