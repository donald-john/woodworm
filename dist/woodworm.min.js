/*
 *  Woodworm.js - v0.1.1
 *  A handy-dandy javascript library to parse, display, and manage bible passages from Labs.Bible.org
 *  http://donald-john.github.io/woodworm/
 *
 *  Made by Don Adams
 *  Under MIT License
 */
!function(a,b){"use strict";function c(b,c){this.element=b,this.settings=a.extend({},e,c),this._defaults=e,this._name=d,this.init()}a&&b.jQuery||console.error("Woodworm: jQuery not included. Woodworm needs jQuery to do it's thang.");var d="Woodworm",e={book:"Genesis",chapter:1,verse:1,selected_verses:[]};a.extend(c.prototype,{init:function(){this.getChapter()},getChapter:function(a,b,c){"function"!=typeof a?(this.settings.chapter=b?parseInt(b):this.settings.chapter,this.settings.book=a?a:this.settings.book):c=a,this.getData(this.render,c,this)},render:function(b,c){a(c.element).empty();for(var d=0;d<b.length;d++){var e=b[d].bookname,f=b[d].chapter,g=b[d].verse;b[d].title?(a(c.element).append("<h4>"+b[d].title+"</h4>"),a(c.element).append("<div class='p' id="+e+f+"-"+g+" onclick=\"catchClick('"+e+"',"+f+","+g+")\"><span class='content'></span><span class='verse v1' data-usfm='JHN.1.1'><span class='label'>"+b[d].verse+"</span><span class='content'>"+b[d].text+"</span></span></div>")):a(c.element).append("<div class='p' id="+e+f+"-"+g+" onclick=\"catchClick('"+e+"',"+f+","+g+")\"><span class='content'></span><span class='verse v1' data-usfm='JHN.1.1'><span class='label'>"+b[d].verse+"</span><span class='content'>"+b[d].text+"</span></span></div>")}},getData:function(b,c,d){a.getJSON("http://labs.bible.org/api/?passage="+d.settings.book+"%20"+d.settings.chapter+"&type=json&callback=?").done(function(a){b(a,d),c&&c(a,d)})},status:function(){return this.settings},verseClick:function(b,c,d){function e(b,c){var d;a.grep(c,function(a,e){b.verse===a.verse&&b.book===a.book&&b.chapter===a.chapter&&(c=c.splice(e,1),d=!0)}),d||c.push(b),console.log(c)}"rgb(255, 255, 0)"!==a("#"+b+c+"-"+d).css("background-color")?a("#"+b+c+"-"+d).css("background-color","yellow"):a("#"+b+c+"-"+d).css("background-color","white"),e({book:b,chapter:c,verse:d},this.settings.selected_verses)},err:function(a){console.error(a)}}),a.fn[d]=function(b){return this.each(function(){a.data(this,"plugin_"+d)||a.data(this,"plugin_"+d,new c(this,b))})}}(jQuery,window,document);